<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US">
    <head>

        <!-- Libraries and Dependencies -->
        <link href='lib/normalize.css' rel='stylesheet'>
        <script type="text/javascript" src="lib/jquery.js"></script>
        <script type="text/javascript" src="lib/mouse.js"></script>
        <script type="text/javascript" src="lib/pubsub.js"></script>
        <script type="text/javascript" src="lib/vue.js"></script>
        <script type="text/javascript" src="lib/gui.js"></script>
        <script type="text/javascript" src="lib/debugger.js"></script>
        <script type="text/javascript" src="lib/resampler.js"></script>
        <script type="text/javascript" src="lib/XAudioServer.js"></script>

        <!-- Modular Components -->
        <link href='components/window.css' rel='stylesheet'>
        <script src="components/window.js" type="text/javascript" ></script>
        <link href='components/scrollbar.css' rel='stylesheet'>
        <script src="components/scrollbar.js" type="text/javascript" ></script>
		<link href='components/popup.css' rel='stylesheet'>
        <script src="components/popup.js" type="text/javascript" ></script>

        <!-- Window Programs -->
        <script src="programs/DebugLCDProgram.js" type="text/javascript" ></script>
        <link href='programs/DebugLCDProgram.css' rel='stylesheet'>
        <script src="programs/DebugMemoryProgram.js" type="text/javascript" ></script>
        <link href='programs/DebugMemoryProgram.css' rel='stylesheet'>
        <script src="programs/DebugStateProgram.js" type="text/javascript" ></script>
        <link href='programs/DebugStateProgram.css' rel='stylesheet'>
        <script src="programs/DebugExecutionProgram.js" type="text/javascript" ></script>
        <link href='programs/DebugExecutionProgram.css' rel='stylesheet'>
        <script src="programs/DebugBreakpointProgram.js" type="text/javascript" ></script>
        <link href="programs/DebugBreakpointProgram.css" rel='stylesheet' ></script>

        <!-- Require Emulation Core -->
        <script type="text/javascript" src="emulation/core.js"></script>

        <!-- Require Awakening Layer -->
        <link href='awakening/awakening.css' rel='stylesheet'>
        <script type="text/javascript" src="awakening/awakening.js"></script>
        <script type="text/javascript" src="awakening/GameBoyIO.js"></script>
        
        <!-- Load Emulation State -->
        <script type="text/javascript" src="assets/rom/la_rom.js"></script>
        <script type="text/javascript" src="assets/rom/la_savestate.js"></script>

        <title>Awakening</title>
    </head>
    <body>

        <div id="WINDOW-TEMPLATES">

            <!-- Memory Window Template -->
            <div class="debug-memory-template">
                <div class='memory-row' v-for="row in memory_rows" v-bind:data-address="row.address" >
                    <div class='memory-label'>{{row.label}}</div>
                    <div class='memory-address'>{{row.address}}</div>
                    <div class='memory-values'>
                        <div class='memory-value' v-for="col in row.columns" v-bind:data-address="col.address" v-bind:class="{ selected: col.selected, breakpoint: col.breakpoint }">{{col.value}}</div>
                    </div>
                </div>
            </div>
            
            <!-- State Window Template -->
            <div class="debug-state-template">
                <div cass='debug-flags'>
                    <div class='debug-flag-row' v-for="row in flag_rows">
                        <div class='debug-flag' v-bind:class="{on: row.value}" v-bind:title="row.desc">{{row.label}}</div>
                    </div>
                </div>
                <div class='debug-registers'>
                    <div class='register-row' v-for="row in register_rows">
                        <div class='register-key'>{{row.register}}</div>
                        <div class='register-value memory-link' v-bind:data-register="row.register">{{row.value}}</div>
                    </div>
                </div>

                <div class='debug-stack'>
                    <div class='stack-row' v-for="row in stack_rows"  v-bind:class="{ current: row.current }">
                        <div class='stack-label'>{{row.label}}</div>
                        <div class='stack-address memory-link'>{{row.address}}</div>
                        <div class='stack-values memory-link'>
                            <div class='stack-value' v-for="value in row.values">{{value}}</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Execution Window Template -->
            <div class='debug-execution-template'>
                <div class='execution-toolbar'>
                    <button class='execution-play'>►</button>
                    <button class='execution-pause'>‖</button>
                    <button class='execution-step'>→</button>
                </div>
                <div class='execution-row' v-for="row in op_rows" v-bind:class="{ current: row.current }">
                    <div class='execution-label'>{{row.label}}</div>
                    <div class='execution-address'>{{row.address}}</div>
                    <div class='execution-opcode'>{{row.opcode}}</div>
                    <div class='execution-instruction'>{{row.instruction}}</div>
                </div>
            </div>

            <!-- Breakpoint Window Template -->
            <div class='debug-breakpoint-template'>
                <div class='breakpoint-row header' >
                    <div class='execution-address'>ADDR</div>
                    <div class='execution-settings'>
                        <span>R</span>
                        <span>W</span>
                        <span>X</span>
                    </div>
                </div>
                <div class='breakpoint-row' v-for="row in breakpoint_rows" v-bind:data-address="row.address">
                    <div class='execution-address memory-link'>{{row.address}}</div>
                    <div class='execution-settings'>
                        <span><input type="checkbox" data-setting='r' value="1" v-model="row.r"></span>
                        <span><input type="checkbox" data-setting='w' value="1" v-model="row.w"></span>
                        <span><input type="checkbox" data-setting='x' value="1" v-model="row.x"></span>
                    </div>
                    <div class='execution-remove'>❌</div>
                </div>
                <div class='breakpoint-row new-breakpoint'>
                    <button class='breakpoint-new'>➕</button>
                </div>
                
            </div>
        </div>
    </body>
</html>